<!-- Advertisement Popup -->
    <div id="adPopup" class="ad-popup">
        <div class="ad-content">
            <span class="close-ad" onclick="closeAdPopup()">&times;</span>
            <h3>üéØ D√©couvrez nos R√©alisations !</h3>
            <p>Plus de <strong>200+ projets</strong> r√©alis√©s avec succ√®s √† travers le Cameroun. D√©couvrez comment nous transformons la s√©curit√© des entreprises et particuliers.</p>
            <a href="#projects" class="btn btn-primary" onclick="closeAdPopup()">Voir nos R√©alisations</a>
        </div>
    </div>
    
    <header>
        <div class="container header-content">
            <div class="logo">
                <a href="#" aria-label="RAY-Z Entreprise - Retour √† l'accueil">
                    <img src="image/favicon-96x96.png" alt="Logo RAY-Z Entreprise SARL" width="40" height="40">
                    <h1>RAY-Z</h1>
                </a>
            </div>
            <div class="mobile-toggle" aria-label="Menu mobile"><i class="fas fa-bars"></i></div>
            <nav>
                <ul>
                    <li><a href="#home" class="active">Accueil</a></li>
                    <li><a href="#about">√Ä propos</a></li>
                    <li><a href="#services">Services</a></li>
                    <li><a href="#projects">R√©alisations</a></li>
                    <li><a href="#contact">Contact</a></li>
                    <li><a href="formation.html" class="nav-formation"><i class="fas fa-graduation-cap"></i> Formation Pro</a></li>
                    <li><a href="galerie.html" class="nav-galerie"><i class="fas fa-images"></i> Galerie</a></li>
                    <li><a href="https://shop.thetic.de" target="_blank" rel="noopener noreferrer" class="nav-shop"><i class="fas fa-store"></i> Boutique</a></li>
                </ul>
            </nav>
        </div>
    </header>
    
    <main>
        <section id="home" class="hero">
            <div class="hero-slide active" data-type="video">
                <video autoplay loop muted playsinline preload="auto">
                    <source src="./banier/banv5.jpg" type="image/jpg">
                    Votre navigateur ne supporte pas la balise vid√©o.
                </video>
                <div class="container" style="height:100%; display:flex; align-items:center;">
                    <div class="hero-content scroll-animate">
                        <h1>S√©curit√© Optimale. Performance Maximale.</h1>
                        <p>Syst√®mes d'alarme, Vid√©osurveillance et contr√¥le d'acc√®s biom√©trique.</p>
                        <div class="hero-btns">
                            <a href="#services" class="btn btn-primary">Nos Solutions</a>
                            <a href="https://shop.thetic.de" target="_blank" rel="noopener noreferrer" class="btn btn-shop">Visiter le Shop</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="hero-slide" style="background-image: url('./banier/ban1.jpg');">
                <div class="container" style="height:100%; display:flex; align-items:center;">
                    <div class="hero-content scroll-animate">
                        <h1>R√©seaux Informatiques Fiables.</h1>
                        <p>C√¢blage structur√©, t√©l√©communication et transmission Wi-Fi ultra-rapide.</p>
                        <div class="hero-btns">
                            <a href="#services" class="btn btn-primary">Nos Solutions</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="hero-slide" style="background-image: url('./banier/ban2.jpg');">
                <div class="container" style="height:100%; display:flex; align-items:center;">
                    <div class="hero-content scroll-animate">
                        <h1>Contr√¥le d'Acc√®s S√©curis√©</h1>
                        <p>Pointeuses biom√©triques, lecteurs faciaux et gestion des temps de pr√©sence.</p>
                        <div class="hero-btns">
                            <a href="#projects" class="btn btn-primary">Voir nos Projets</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="hero-slide" style="background-image: url('./banier/ban3.jpg');">
                <div class="container" style="height:100%; display:flex; align-items:center;">
                    <div class="hero-content scroll-animate">
                        <h1>Alerte Rapide, Protection Totale.</h1>
                        <p>D√©ploiement d'alarmes intrusion et de syst√®mes de d√©tection d'incendie certifi√©s.</p>
                        <div class="hero-btns">
                            <a href="#contact" class="btn btn-primary">Demander un Devis</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="slide-controls">
                <div class="control-dot active" onclick="manualSlide(0)" aria-label="Aller √† la slide 1"></div>
                <div class="control-dot" onclick="manualSlide(1)" aria-label="Aller √† la slide 2"></div>
                <div class="control-dot" onclick="manualSlide(2)" aria-label="Aller √† la slide 3"></div>
                <div class="control-dot" onclick="manualSlide(3)" aria-label="Aller √† la slide 4"></div>
            </div>
        </section>
        
        <section id="about" class="section-padding about">
            <div class="container">
                <div class="about-grid">
                    <div class="about-image scroll-animate">
                        <img src="./aventpro/aventpro1.jpg" alt="√âquipe technique RAY-Z en intervention" width="500" height="400">
                        <div class="about-badge">
                            <h4 id="counter-years">5+</h4>
                            <span>Ann√©es d'Expertise</span>
                        </div>
                    </div>
                    <div class="about-text scroll-animate">
                        <h3>Leader en Solutions Technologiques</h3>
                        <p>Chez RAY-Z, nous combinons innovation et fiabilit√© pour s√©curiser vos biens et connecter votre monde. Notre mission est simple : fournir des infrastructures robustes adapt√©es aux d√©fis modernes.</p>
                        <p>De l'installation de r√©seaux informatiques √† la mise en place de syst√®mes de s√©curit√© biom√©trique complexes, notre √©quipe certifi√©e intervient avec rigueur et professionnalisme.</p>
                        <div class="about-stats">
                            <div class="stat-item scroll-animate">
                                <strong id="counter-projects">200+</strong>
                                <span>Projets livr√©s</span>
                            </div>
                            <div class="stat-item scroll-animate">
                                <strong id="counter-clients">98%</strong>
                                <span>Clients satisfaits</span>
                            </div>
                            <div class="stat-item scroll-animate">
                                <strong id="counter-support">6/7</strong>
                                <span>Support (8h-18h)</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="services" class="section-padding services">
            <div class="container">
                <div class="section-header scroll-animate">
                    <h2>Nos Services</h2>
                    <p>Des solutions cl√©s en main pour la s√©curit√© et l'infrastructure num√©rique.</p>
                </div>
                <div class="services-grid">
                    <article class="service-card scroll-animate">
                        <div class="service-icon"><i class="fas fa-video"></i></div>
                        <h3>Vid√©osurveillance</h3>
                        <p>Cam√©ras IP (filaires et sans-fil), enregistrement 4K et syst√®mes intelligents avec IA.</p>
                        <div class="service-actions">
                            <button class="btn-service-devis" onclick="redirectToContact('video')">Obtenir un Devis</button>
                            <a class="btn-whatsapp-devis" onclick="redirectToWhatsApp('video')"><i class="fab fa-whatsapp"></i> Discuter</a>
                        </div>
                        <button class="btn-link" onclick="openServiceModal('video')">En savoir plus <i class="fas fa-arrow-right"></i></button>
                    </article>
                    <article class="service-card scroll-animate">
                        <div class="service-icon"><i class="fas fa-network-wired"></i></div>
                        <h3>R√©seaux Informatiques</h3>
                        <p>Audit, c√¢blage structur√© (RJ45), installation de baies de brassage et racks serveurs.</p>
                        <div class="service-actions">
                            <button class="btn-service-devis" onclick="redirectToContact('reseau')">Obtenir un Devis</button>
                            <a class="btn-whatsapp-devis" onclick="redirectToWhatsApp('reseau')"><i class="fab fa-whatsapp"></i> Discuter</a>
                        </div>
                        <button class="btn-link" onclick="openServiceModal('reseau')">En savoir plus <i class="fas fa-arrow-right"></i></button>
                    </article>
                    <article class="service-card scroll-animate">
                        <div class="service-icon"><i class="fas fa-lock"></i></div>
                        <h3>Contr√¥leur d'Acc√®s</h3>
                        <p>Syst√®mes d'acc√®s par badge, code, ou biom√©trie pour la s√©curit√© des zones sensibles.</p>
                        <div class="service-actions">
                            <button class="btn-service-devis" onclick="redirectToContact('controleur')">Obtenir un Devis</button>
                            <a class="btn-whatsapp-devis" onclick="redirectToWhatsApp('controleur')"><i class="fab fa-whatsapp"></i> Discuter</a>
                        </div>
                        <button class="btn-link" onclick="openServiceModal('controleur')">En savoir plus <i class="fas fa-arrow-right"></i></button>
                    </article>
                    <article class="service-card scroll-animate">
                        <div class="service-icon"><i class="fas fa-fingerprint"></i></div>
                        <h3>Alarme Intrusion</h3>
                        <p>Syst√®mes d'alarme sans fil, d√©tecteurs de mouvement et protection p√©rim√©trique.</p>
                        <div class="service-actions">
                            <button class="btn-service-devis" onclick="redirectToContact('intrusion')">Obtenir un Devis</button>
                            <a class="btn-whatsapp-devis" onclick="redirectToWhatsApp('intrusion')"><i class="fab fa-whatsapp"></i> Discuter</a>
                        </div>
                        <button class="btn-link" onclick="openServiceModal('intrusion')">En savoir plus <i class="fas fa-arrow-right"></i></button>
                    </article>
                    <article class="service-card scroll-animate">
                        <div class="service-icon"><i class="fas fa-fire-extinguisher"></i></div>
                        <h3>Alarme Incendie</h3>
                        <p>Installation et maintenance de syst√®mes de d√©tection incendie conventionnels et adressables.</p>
                        <div class="service-actions">
                            <button class="btn-service-devis" onclick="redirectToContact('incendie')">Obtenir un Devis</button>
                            <a class="btn-whatsapp-devis" onclick="redirectToWhatsApp('incendie')"><i class="fab fa-whatsapp"></i> Discuter</a>
                        </div>
                        <button class="btn-link" onclick="openServiceModal('incendie')">En savoir plus <i class="fas fa-arrow-right"></i></button>
                    </article>
                    <article class="service-card scroll-animate">
                        <div class="service-icon"><i class="fas fa-wifi"></i></div>
                        <h3>T√©l√©com & Wi-Fi</h3>
                        <p>D√©ploiement de bornes Wi-Fi performantes et de liaisons sans fil (PTP/PTMP) longue distance.</p>
                        <div class="service-actions">
                            <button class="btn-service-devis" onclick="redirectToContact('telecom')">Obtenir un Devis</button>
                            <a class="btn-whatsapp-devis" onclick="redirectToWhatsApp('telecom')"><i class="fab fa-whatsapp"></i> Discuter</a>
                        </div>
                        <button class="btn-link" onclick="openServiceModal('telecom')">En savoir plus <i class="fas fa-arrow-right"></i></button>
                    </article>
                </div>
            </div>
        </section>
        
        <section id="projects" class="section-padding projects">
            <div class="container">
                <div class="section-header scroll-animate">
                    <h2>Nos R√©alisations</h2>
                    <p>D√©couvrez nos installations r√©centes √† travers ce carrousel interactif.</p>
                </div>
                <div class="projects-carousel-container">
                    <div class="projects-carousel" id="projectsCarousel">
                        <!-- Les projets seront g√©n√©r√©s dynamiquement ici -->
                    </div>
                    <button class="carousel-btn prev" onclick="moveCarousel(-1)" aria-label="Projet pr√©c√©dent">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <button class="carousel-btn next" onclick="moveCarousel(1)" aria-label="Projet suivant">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
                <div class="carousel-dots" id="carouselDots">
                    <!-- Les points de navigation seront g√©n√©r√©s dynamiquement ici -->
                </div>
            </div>
        </section>
        
        <section id="contact" class="section-padding" style="background-color: #f8fafc;">
            <div class="container">
                <div class="section-header scroll-animate">
                    <h2>Contactez-Nous</h2>
                    <p>Pr√™t √† s√©curiser votre environnement ?</p>
                </div>
                <div class="contact-container">
                    <div class="contact-info scroll-animate">
                        <h3>Informations</h3>
                        <p>Notre √©quipe technique est disponible pour r√©pondre √† toutes vos questions.</p>
                        <br>
                        <div class="info-item">
                            <i class="fas fa-map-marker-alt"></i>
                            <div>
                                <strong>Adresse:</strong><br>march√© logpom, Douala
                            </div>
                        </div>
                        <div class="info-item">
                            <i class="fas fa-phone-alt"></i>
                            <div>
                                <strong>T√©l√©phone:</strong><br>
                                <a href="tel:+237650316954" style="color: white;">+237 6 83 17 88 84</a><br>
                                <a href="tel:+237691234567" style="color: white;">+237 6 91 23 45 67</a>
                            </div>
                        </div>
                        <div class="info-item">
                            <i class="fas fa-envelope"></i>
                            <div>
                                <strong>Email:</strong><br>
                                <a href="mailto:info@ray-zentreprise.com" style="color: white;">info@ray-zentreprise.com</a>
                            </div>
                        </div>
                        <div class="info-item">
                            <i class="fas fa-clock"></i>
                            <div>
                                <strong>Support:</strong><br>8h - 18h, 6 jours sur 7
                            </div>
                        </div>
                    </div>
                    <div class="contact-form scroll-animate">
                        <form id="contactForm">
                            <div class="form-group">
                                <input type="text" name="user_name" class="form-control" placeholder="Votre nom complet" required>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <input type="email" name="user_email" class="form-control" placeholder="Votre email" required>
                                </div>
                                <div class="form-group">
                                    <input type="tel" name="user_phone" class="form-control" placeholder="Votre num√©ro de t√©l√©phone" required>
                                </div>
                            </div>
                            <div class="form-group">
                                <select name="service" id="serviceSelect" class="form-control" required>
                                    <option value="">Service concern√© (S√©lectionner)</option>
                                    <option value="video">Vid√©osurveillance</option>
                                    <option value="reseau">R√©seaux Informatiques</option>
                                    <option value="controleur">Contr√¥leur d'Acc√®s</option>
                                    <option value="intrusion">Alarme Intrusion</option>
                                    <option value="incendie">Alarme Incendie</option>
                                    <option value="telecom">T√©l√©com & Wi-Fi</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <textarea name="message" class="form-control" rows="5" placeholder="Votre message..." required></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary" style="width:100%">Envoyer le message</button>
                        </form>
                    </div>
                </div>
            </div>
        </section>
    </main>
    
    <footer>
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col">
                    <div class="logo" style="margin-bottom:13.05px;">
                        <a href="#" style="color:white; display:flex; align-items:center; gap:8.7px;">
                            <img src="image/favicon-96x96.png" alt="Logo RAY-Z Entreprise" width="40" height="40">
                            <h3 style="margin:0 0 0 8.7px; color:white;">RAY-Z</h3>
                        </a>
                    </div>
                    <p>Solutions technologiques innovantes pour entreprises et particuliers.</p>
                </div>
                <div class="footer-col">
                    <h4>Liens Rapides</h4>
                    <ul>
                        <li><a href="#home">Accueil</a></li>
                        <li><a href="#about">√Ä Propos</a></li>
                        <li><a href="#projects">R√©alisations</a></li>
                        <li><a href="#contact">Contact</a></li>
                        <li><a href="formation.html">Formation</a></li>
                        <li><a href="galerie.html">Galerie</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Services Cl√©s</h4>
                    <ul>
                        <li><a href="#services">Vid√©osurveillance</a></li>
                        <li><a href="#services">Contr√¥le d'Acc√®s</a></li>
                        <li><a href="#services">Alarme Intrusion</a></li>
                        <li><a href="#services">R√©seaux Informatiques</a></li>
                        <li><a href="#services">T√©l√©com & Wi-Fi</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Contact & Support</h4>
                    <div class="info-item" style="color:#94a3b8; margin-bottom:8.7px;">
                        <i class="fas fa-map-marker-alt" style="margin-right:8.7px;"></i> march√© logpom, Douala
                    </div>
                    <div class="info-item" style="color:#94a3b8; margin-bottom:8.7px;">
                        <i class="fas fa-phone-alt" style="margin-right:8.7px;"></i> 
                        <a href="tel:+237650316954" style="color:#94a3b8;">+237 6 83 17 88 84</a><br>
                        <a href="tel:+237691234567" style="color:#94a3b8;">+237 6 91 23 45 67</a>
                    </div>
                    <p style="margin-top:8.7px;"><strong>Email:</strong> <a href="mailto:info@ray-zentreprise.com" style="color:#94a3b8;">info@ray-zentreprise.com</a></p>
                    <div class="social-links" style="margin-top:13.05px;">
                        <a href="https://wa.me/message/R5CLNKONGTG2O1" target="_blank" rel="noopener noreferrer" class="social-link" aria-label="WhatsApp"><i class="fab fa-whatsapp"></i></a>
                        <a href="https://www.facebook.com/rayzentreprise/about?locale=fr_FR" target="_blank" rel="noopener noreferrer" class="social-link" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="https://www.linkedin.com/company/ray-z-entreprise-sarl/" target="_blank" rel="noopener noreferrer" class="social-link" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                        <a href="https://www.tiktok.com/@rayzentreprise" target="_blank" rel="noopener noreferrer" class="social-link" aria-label="TikTok"><i class="fab fa-tiktok"></i></a>
                    </div>
                </div>
            </div>
            <div class="footer-map">
                <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3980.948242299743!2d9.762323674993962!3d4.085782395993147!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x10610d688c75b575%3A0x16552b0e97c5ff79!2sRAY-Z%20ENTREPRISE%20SARL!5e1!3m2!1sfr!2scm!4v1731862834986!5m2!1sfr!2scm" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade" title="Localisation de RAY-Z Entreprise SARL"></iframe>
            </div>
            <div class="copyright">
                &copy; 2025 RAY-Z Entreprise SARL. Tous droits r√©serv√©s.
            </div>
        </div>
    </footer>
    
    <!-- Universal Modal for Projects and Services -->
    <div id="universalModal" class="modal">
        <span class="close-modal" onclick="closeModal()">&times;</span>
        <div class="modal-content">
            <div id="modalMedia" class="modal-media-container">
                <!-- Images will be inserted here by JavaScript -->
            </div>
            <div class="modal-details">
                <span id="modalCategory" class="category">Cat√©gorie</span>
                <h3 id="modalTitle">Titre</h3>
                <div id="modalBody" style="color:#64748b; line-height:1.5;">Description...</div>
                <div style="margin-top:17.4px; text-align:right;">
                    <a href="#contact" class="btn btn-primary" onclick="closeModal()">Demander un devis</a>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Installation Request Modal -->
    <div id="installModal" class="install-modal">
        <div class="install-modal-content">
            <div class="install-modal-header">
                <h3>Demande d'Intervention</h3>
                <span class="close-install-modal" onclick="closeInstallModal()">&times;</span>
            </div>
            <div class="install-modal-steps">
                <div class="install-step active" id="step0-indicator">
                    <div class="step-number">1</div>
                    <div class="step-label">Type d'Intervention</div>
                </div>
                <div class="install-step" id="step1-indicator">
                    <div class="step-number">2</div>
                    <div class="step-label">Type & Localisation</div>
                </div>
                <div class="install-step" id="step2-indicator">
                    <div class="step-number">3</div>
                    <div class="step-label">D√©tails</div>
                </div>
                <div class="install-step" id="step3-indicator">
                    <div class="step-number">4</div>
                    <div class="step-label">Contact</div>
                </div>
            </div>
            <form id="installRequestForm">
                <!-- Step 0: Type d'Intervention -->
                <div class="install-form-step active" id="step0">
                    <div class="install-form-group">
                        <label for="interventionType">Type d'Intervention *</label>
                        <select id="interventionType" class="install-form-control" required>
                            <option value="">S√©lectionnez...</option>
                            <option value="installation">Installation</option>
                            <option value="intervention">Intervention Technique</option>
                            <option value="maintenance">Maintenance</option>
                        </select>
                    </div>
                    <p style="color:#64748b; font-size:0.9rem; margin-top:10px;">
                        <i class="fas fa-info-circle"></i> S√©lectionnez le type d'intervention dont vous avez besoin
                    </p>
                </div>
                
                <!-- Step 1: Type d'installation et Ville -->
                <div class="install-form-step" id="step1">
                    <div class="install-form-group">
                        <label for="installationType">Type d'Installation *</label>
                        <select id="installationType" class="install-form-control" required>
                            <option value="">S√©lectionnez...</option>
                            <option value="video">Vid√©osurveillance</option>
                            <option value="intrusion">Alarme Intrusion</option>
                            <option value="incendie">Alarme Incendie</option>
                            <option value="controleur">Contr√¥le d'Acc√®s</option>
                            <option value="reseau">R√©seau Informatique</option>
                            <option value="telecom">T√©l√©com & Wi-Fi</option>
                            <option value="autre">Autre</option>
                        </select>
                    </div>
                    <div class="install-form-group">
                        <label for="userCity">Ville *</label>
                        <input type="text" id="userCity" class="install-form-control" placeholder="Ex: Douala, Yaound√©, Bafoussam..." required>
                    </div>
                    <div class="install-form-group">
                        <label for="userQuarter">Quartier/Commune (Optionnel)</label>
                        <input type="text" id="userQuarter" class="install-form-control" placeholder="Ex: Logpom, Bonapriso, Akwa...">
                    </div>
                </div>
                
                <!-- Step 2: D√©tails -->
                <div class="install-form-step" id="step2">
                    <div class="install-form-group">
                        <label for="installationDetails">Description de votre besoin *</label>
                        <textarea id="installationDetails" class="install-form-control" rows="3" placeholder="Surface √† s√©curiser, nombre de pi√®ces, objectifs sp√©cifiques..." required></textarea>
                    </div>
                    
                    <!-- D√©tails sp√©cifiques √† la vid√©osurveillance -->
                    <div id="videoDetails" style="display: none;">
                        <div class="install-form-group">
                            <label for="cameraType">Type de Cam√©ras *</label>
                            <select id="cameraType" class="install-form-control">
                                <option value="">S√©lectionnez...</option>
                                <option value="filaire">Filaire</option>
                                <option value="sans_fil">Sans Fil</option>
                                <option value="ptz">PTZ Motoris√©e</option>
                                <option value="dome">D√¥me</option>
                                <option value="bullet">Bullet</option>
                            </select>
                        </div>
                        <div class="install-form-group">
                            <label for="cameraCount">Nombre estim√© de Cam√©ras *</label>
                            <select id="cameraCount" class="install-form-control">
                                <option value="">S√©lectionnez...</option>
                                <option value="1-4">1 √† 4 cam√©ras</option>
                                <option value="5-8">5 √† 8 cam√©ras</option>
                                <option value="9-16">9 √† 16 cam√©ras</option>
                                <option value="16+">Plus de 16 cam√©ras</option>
                            </select>
                        </div>
                        <div class="install-form-group">
                            <label for="recordingNeed">Besoin d'enregistrement *</label>
                            <select id="recordingNeed" class="install-form-control">
                                <option value="">S√©lectionnez...</option>
                                <option value="avec_nvr">Avec NVR (Enregistreur)</option>
                                <option value="sans_nvr">Sans NVR (Cloud/Mobile)</option>
                                <option value="pas_sur">Je ne sais pas</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- D√©tails sp√©cifiques pour autres services -->
                    <div id="otherDetails" style="display: none;">
                        <div class="install-form-group">
                            <label for="otherServices">Autres d√©tails (Optionnel)</label>
                            <textarea id="otherServices" class="install-form-control" rows="2" placeholder="Dimensions, nombre d'acc√®s, distance entre b√¢timents..."></textarea>
                        </div>
                    </div>
                    
                    <div class="install-form-group">
                        <label for="budgetRange">Budget estim√© (Optionnel)</label>
                        <select id="budgetRange" class="install-form-control">
                            <option value="">S√©lectionnez...</option>
                            <option value="100-500">100.000 - 500.000 FCFA</option>
                            <option value="500-1000">500.000 - 1.000.000 FCFA</option>
                            <option value="1000-2000">1.000.000 - 2.000.000 FCFA</option>
                            <option value="2000+">Plus de 2.000.000 FCFA</option>
                            <option value="pas_sur">Je ne sais pas</option>
                        </select>
                    </div>
                </div>
                
                <!-- Step 3: Contact -->
                <div class="install-form-step" id="step3">
                    <div class="install-form-group">
                        <label for="userName">Votre nom complet *</label>
                        <input type="text" id="userName" class="install-form-control" placeholder="Ex: Jean Dupont" required>
                    </div>
                    <div class="form-row">
                        <div class="install-form-group">
                            <label for="userEmail">Email *</label>
                            <input type="email" id="userEmail" class="install-form-control" placeholder="ex: nom@domaine.com" required>
                        </div>
                        <div class="install-form-group">
                            <label for="userPhone">T√©l√©phone *</label>
                            <input type="tel" id="userPhone" class="install-form-control" placeholder="+237 XXX XX XX XX" required>
                        </div>
                    </div>
                    <div class="install-form-group">
                        <label for="preferredContact">Moment pr√©f√©r√© pour contact</label>
                        <select id="preferredContact" class="install-form-control">
                            <option value="">S√©lectionnez...</option>
                            <option value="matin">Matin (8h-12h)</option>
                            <option value="apres_midi">Apr√®s-midi (13h-18h)</option>
                            <option value="soir">Soir (apr√®s 18h)</option>
                            <option value="indifferent">Indiff√©rent</option>
                        </select>
                    </div>
                    <div class="install-form-group">
                        <label for="additionalInfo">Informations suppl√©mentaires (Optionnel)</label>
                        <textarea id="additionalInfo" class="install-form-control" rows="2" placeholder="Autres informations utiles..."></textarea>
                    </div>
                </div>
                
                <div class="install-btns">
                    <button type="button" class="install-btn install-btn-prev" id="prevBtn" onclick="prevInstallStep()" style="display: none;">Pr√©c√©dent</button>
                    <button type="button" class="install-btn install-btn-next" id="nextBtn" onclick="nextInstallStep()">Suivant</button>
                    <button type="submit" class="install-btn install-btn-submit" id="submitBtn" style="display: none;">Envoyer la Demande</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Floating Buttons -->
    <div class="install-float" onclick="openInstallModal()" aria-label="Demande d'intervention">
        <i class="fas fa-tools"></i>
    </div>
    
    <a href="https://wa.me/message/R5CLNKONGTG2O1" target="_blank" rel="noopener noreferrer" class="whatsapp-float" aria-label="Contactez-nous sur WhatsApp">
        <i class="fab fa-whatsapp"></i>
    </a>
    
    <a href="https://www.facebook.com/rayzentreprise/about?locale=fr_FR" target="_blank" rel="noopener noreferrer" class="facebook-float" aria-label="Visitez notre page Facebook">
        <i class="fab fa-facebook-f"></i>
    </a>
    
    <script>
        // --- DATA ---
        const servicesData = {
            'video': { 
                title: "Vid√©osurveillance", 
                content: "Nos syst√®mes de vid√©osurveillance utilisent l'intelligence artificielle pour distinguer les humains des v√©hicules ou animaux, r√©duisant les fausses alertes. Nous proposons des cam√©ras IP haute r√©solution (filaires/sans-fil), des d√¥mes PTZ motoris√©s et des solutions de stockage s√©curis√©.",
                default_email_msg: "Bonjour, je souhaite obtenir un devis pour votre service de Vid√©osurveillance. Pouvez-vous me contacter rapidement pour discuter des options 4K et des syst√®mes intelligents avec IA ?",
                default_whatsapp_msg: "Bonjour RAY-Z, je suis int√©ress√©(e) par la Vid√©osurveillance (cam√©ras 4K, syst√®mes intelligents). Merci de me faire un devis."
            },
            'reseau': { 
                title: "R√©seaux Informatiques", 
                content: "Une infrastructure r√©seau solide est la base de toute entreprise. Nous r√©alisons l'audit, le c√¢blage structur√© (RJ45), l'installation de baies de brassage et racks serveurs.",
                default_email_msg: "Bonjour, j'ai besoin d'une √©valuation pour l'installation d'un R√©seau Informatique (audit, c√¢blage structur√©, baies de brassage). Merci de me recontacter.",
                default_whatsapp_msg: "Bonjour, j'ai un projet de R√©seau Informatique (c√¢blage structur√©/audit). J'aimerais discuter des d√©tails."
            },
            'controleur': { 
                title: "Contr√¥leur d'Acc√®s", 
                content: "S√©curisez vos locaux avec nos solutions de contr√¥le d'acc√®s : serrures connect√©es, lecteurs de badges, digicodes, et syst√®mes biom√©triques (empreinte/facial) pour les zones sensibles.",
                default_email_msg: "Je souhaite installer un Contr√¥leur d'Acc√®s biom√©trique (empreinte/facial) pour nos bureaux. Veuillez me fournir plus d'informations et un devis.",
                default_whatsapp_msg: "Devis pour Contr√¥leur d'Acc√®s (biom√©trie/badge) svp. J'ai des questions sur l'installation."
            },
            'intrusion': { 
                title: "Alarme Intrusion", 
                content: "Prot√©gez vos biens contre le vol avec nos syst√®mes d'alarme intrusion certifi√©s. D√©tecteurs de mouvement, de choc et d'ouverture avec surveillance √† distance via application mobile.",
                default_email_msg: "Je voudrais un devis pour un syst√®me d'Alarme Intrusion sans fil. Quelle est l'estimation des co√ªts pour une maison/appartement standard ?",
                default_whatsapp_msg: "Alarme Intrusion sans fil. J'aimerais un devis rapide. Merci."
            },
            'incendie': { 
                title: "Alarme Incendie", 
                content: "Installation et maintenance de syst√®mes de d√©tection incendie conformes aux normes. D√©tecteurs de fum√©e, de chaleur et de monoxyde de carbone, avec alerte centralis√©e et √©vacuation.",
                default_email_msg: "Nous avons besoin d'une installation d'Alarme Incendie (syst√®me adressable) et de la maintenance. Quel est le processus de devis ?",
                default_whatsapp_msg: "Bonjour, j'ai besoin d'un devis pour Alarme Incendie. Merci de m'aider."
            },
            'telecom': { 
                title: "T√©l√©communication & Wi-Fi", 
                content: "Optimisez votre connectivit√©. Nous d√©ployons des bornes Wi-Fi Mesh pour une couverture sans faille et installons des liaisons point-√†-point sans fil (AirMAX/NanoStation) pour relier des b√¢timents distants.",
                default_email_msg: "Je suis int√©ress√© par l'optimisation de notre T√©l√©communication & Wi-Fi (bornes Mesh ou liaison point-√†-point). Pouvez-vous r√©aliser un audit ?",
                default_whatsapp_msg: "Je cherche √† am√©liorer mon Wi-Fi (r√©seau Mesh). Devis T√©l√©com & Wi-Fi svp."
            }
        };
        
        const projectsData = [
            {
                id: 'camfil-villa', 
                title: "Installation Villa Prestige",
                category: "Cam√©ras Filaires 4K",
                desc: "Installation compl√®te d'un syst√®me de 8 cam√©ras 4K filaires Dahua dans une villa, incluant un NVR 16 canaux et une surveillance par IA. Utilisation de c√¢blage Cat6 pour une qualit√© d'image optimale et p√©renne.",
                images: [
                    "./camfil/camfil1.jpg",
                    "./camfil/camfil2.jpg",
                    "./camfil/camfil3.jpg",
                    "./camfil/camfil4.jpg",
                    "./camfil/camfil5.jpg",
                ]
            },
            {
                id: 'control-bureau', 
                title: "Gestion de Pr√©sence Bureau",
                category: "Contr√¥le d'Acc√®s Biom√©trique",
                desc: "Installation de 4 terminaux de pointage √† reconnaissance faciale et empreinte digitale pour un bureau d'avocats. Logiciel centralis√© de gestion des temps de pr√©sence et calcul automatique des heures suppl√©mentaires.",
                images: [
                    "./control/control1.jpg",
                    "./control/control2.jpg",
                    "./control/control3.jpg",
                    "./control/control4.jpg",
                    "./control/control5.jpg",
                ]
            },
            {
                id: 'intru-appartement', 
                title: "Alarme Sans Fil Appartement",
                category: "Alarme Intrusion",
                desc: "D√©ploiement d'un syst√®me d'alarme sans fil Ajax avec d√©tecteurs de mouvement et d'ouverture. Int√©gration compl√®te sur smartphone et sir√®ne ext√©rieure puissante pour une protection maximale.",
                images: [
                    "./intru/intru1.jpg",
                    "./intru/intru2.jpg",
                    "./intru/intru3.jpg",
                    "./intru/intru4.jpg",
                    "./intru/intru5.jpg",
                ]
            },
            {
                id: 'cams-magasin', 
                title: "Vid√©osurveillance Magasin",
                category: "Cam√©ras Sans Fil Wi-Fi",
                desc: "Mise en place de cam√©ras Wi-Fi 2K sur batterie avec stockage local et cloud. Solution id√©ale pour les petits commerces ou les zones o√π le c√¢blage est difficile et co√ªteux.",
                images: [
                    "./cams/cams1.jpg",
                    "./cams/cams2.jpg",
                    "./cams/cams3.jpg",
                    "./cams/cams4.jpg",
                    "./cams/cams5.jpg",
                ]
            },
            {
                id: 'camfil-entrepot', 
                title: "Surveillance Entrep√¥t 360¬∞",
                category: "Cam√©ras PTZ Motoris√©es",
                desc: "Installation de cam√©ras d√¥me PTZ motoris√©es avec vision nocturne avanc√©e pour couvrir la totalit√© d'un grand entrep√¥t logistique. Solution pilotable √† distance.",
                images: [
                    "./camfil/camfil_extra1.jpg",
                    "./camfil/camfil_extra2.jpg",
                    "./camfil/camfil_extra3.jpg",
                    "./camfil/camfil_extra4.jpg",
                ]
            },
            {
                id: 'incendie-bureau', 
                title: "Syst√®me Incendie Bureau",
                category: "Alarme Incendie Adressable",
                desc: "Installation d'un syst√®me d'alarme incendie adressable dans un immeuble de bureaux de 5 √©tages avec d√©tecteurs de fum√©e et de chaleur.",
                images: [
                    "./incendie/incendie1.jpg",
                    "./incendie/incendie2.jpg",
                    "./incendie/incendie3.jpg",
                    "./incendie/incendie4.jpg",
                ]
            },
            {
                id: 'telecom-campus', 
                title: "R√©seau Campus Universitaire",
                category: "Wi-Fi Haute Densit√©",
                desc: "D√©ploiement d'un r√©seau Wi-Fi haute densit√© sur un campus universitaire avec plus de 50 points d'acc√®s et liaison point-√†-point entre b√¢timents.",
                images: [
                    "./telecom/telecom1.jpg",
                    "./telecom/telecom2.jpg",
                    "./telecom/telecom3.jpg",
                    "./telecom/telecom4.jpg",
                ]
            }
        ];
        
        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', function() {
            // Show ad popup after 5 seconds (plus l√©ger)
            setTimeout(function() {
                showAdPopup();
            }, 5000);
            
            // Initialize all components
            showHero(0); 
            initProjectsCarousel();
            initScrollAnimation();
            
            // Initialize counters animation
            initCounters();
            
            // Play video if present
            const activeSlide = document.querySelector('.hero-slide.active');
            if(activeSlide && activeSlide.hasAttribute('data-type', 'video')) {
                const video = activeSlide.querySelector('video');
                if(video) video.play().catch(e => console.log("Video autoplay prevented:", e));
            }
            
            // Setup contact form with corrected EmailJS
            setupContactForm();
            
            // Setup installation form
            setupInstallationForm();
        });
        
        // --- COUNTER ANIMATION ---
        function initCounters() {
            const projectsCounter = document.getElementById('counter-projects');
            const clientsCounter = document.getElementById('counter-clients');
            const supportCounter = document.getElementById('counter-support');
            const yearsCounter = document.getElementById('counter-years');
            
            if (projectsCounter) {
                animateCounter(projectsCounter, 200, 200, 1500);
            }
            if (clientsCounter) {
                animateCounter(clientsCounter, 0, 98, 1500);
            }
            if (supportCounter) {
                supportCounter.textContent = "6/7";
            }
            if (yearsCounter) {
                yearsCounter.textContent = "5+";
            }
        }
        
        function animateCounter(element, start, end, duration) {
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                const current = Math.floor(progress * (end - start) + start);
                element.textContent = current + (element.id === 'counter-projects' ? '+' : '%');
                if (progress < 1) {
                    window.requestAnimationFrame(step);
                }
            };
            window.requestAnimationFrame(step);
        }
        
        // --- ADVERTISEMENT POPUP ---
        function showAdPopup() {
            const adPopup = document.getElementById('adPopup');
            if (adPopup && !localStorage.getItem('adPopupClosed')) {
                adPopup.style.display = 'flex';
                // Auto close after 10 seconds
                setTimeout(() => {
                    if (adPopup.style.display !== 'none') {
                        closeAdPopup();
                    }
                }, 10000);
            }
        }
        
        function closeAdPopup() {
            const adPopup = document.getElementById('adPopup');
            if (adPopup) {
                adPopup.style.display = 'none';
                localStorage.setItem('adPopupClosed', 'true');
            }
        }
        
        // --- SCROLL ANIMATION ---
        function initScrollAnimation() {
            const elements = document.querySelectorAll('.scroll-animate');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('animated');
                    }
                });
            }, {
                threshold: 0.1,
                rootMargin: '0px 0px -43.5px 0px'
            });
            elements.forEach(element => {
                observer.observe(element);
            });
        }
        
        // --- HERO SLIDER ---
        let heroIndex = 0;
        const heroSlides = document.querySelectorAll('.hero-slide');
        const dots = document.querySelectorAll('.control-dot');
        let heroTimer;
        
        function showHero(n) {
            heroSlides.forEach(s => s.classList.remove('active'));
            dots.forEach(d => d.classList.remove('active'));
            heroIndex = (n + heroSlides.length) % heroSlides.length;
            heroSlides[heroIndex].classList.add('active');
            dots[heroIndex].classList.add('active');
            
            // Handle video playback
            const activeSlide = heroSlides[heroIndex];
            if(activeSlide.hasAttribute('data-type', 'video')) {
                const video = activeSlide.querySelector('video');
                if(video) {
                    video.currentTime = 0;
                    video.play().catch(e => console.log("Video autoplay prevented:", e));
                }
            }
        }
        
        function manualSlide(n) { 
            showHero(n); 
            resetHeroTimer(); 
        }
        
        function startHeroTimer() {
            heroTimer = setInterval(() => showHero(heroIndex + 1), 5000);
        }
        
        function resetHeroTimer() { 
            clearInterval(heroTimer); 
            startHeroTimer(); 
        }
        
        startHeroTimer();
        
        // --- PROJECTS CAROUSEL ---
        let currentCarouselSlide = 0;
        let carouselInterval;
        
        function initProjectsCarousel() {
            const carousel = document.getElementById('projectsCarousel');
            const dotsContainer = document.getElementById('carouselDots');
            
            carousel.innerHTML = '';
            dotsContainer.innerHTML = '';
            
            projectsData.forEach((project, index) => {
                // Create slide
                const slide = document.createElement('div');
                slide.className = 'project-slide scroll-animate';
                slide.setAttribute('onclick', `openProjectModal('${project.id}')`);
                slide.setAttribute('aria-label', `Voir le projet: ${project.title}`);
                
                const imageUrl = project.images.length > 0 ? project.images[0] : '';
                slide.innerHTML = `
                    <img src="${imageUrl}" alt="${project.title} - ${project.category}" loading="lazy">
                    <div class="project-slide-overlay">
                        <div class="project-slide-title">${project.title}</div>
                        <div class="project-slide-category">${project.category}</div>
                    </div>
                `;
                carousel.appendChild(slide);
                
                // Create dot
                const dot = document.createElement('div');
                dot.className = 'carousel-dot';
                if (index === 0) dot.classList.add('active');
                dot.setAttribute('onclick', `goToCarouselSlide(${index})`);
                dot.setAttribute('aria-label', `Aller au projet ${index + 1}`);
                dotsContainer.appendChild(dot);
            });
            
            updateCarousel();
            startCarouselAutoSlide();
        }
        
        function moveCarousel(direction) {
            currentCarouselSlide += direction;
            if (currentCarouselSlide >= projectsData.length) {
                currentCarouselSlide = 0;
            } else if (currentCarouselSlide < 0) {
                currentCarouselSlide = projectsData.length - 1;
            }
            updateCarousel();
            resetCarouselAutoSlide();
        }
        
        function goToCarouselSlide(index) {
            currentCarouselSlide = index;
            updateCarousel();
            resetCarouselAutoSlide();
        }
        
        function updateCarousel() {
            const carousel = document.getElementById('projectsCarousel');
            const slideWidth = 340; // 320px + 20px gap
            carousel.style.transform = `translateX(-${currentCarouselSlide * slideWidth}px)`;
            
            document.querySelectorAll('.carousel-dot').forEach((dot, index) => {
                dot.classList.toggle('active', index === currentCarouselSlide);
            });
        }
        
        function startCarouselAutoSlide() {
            carouselInterval = setInterval(() => {
                moveCarousel(1);
            }, 4000);
        }
        
        function resetCarouselAutoSlide() {
            clearInterval(carouselInterval);
            startCarouselAutoSlide();
        }
        
        // --- MODAL FUNCTIONS ---
        const modal = document.getElementById("universalModal");
        let currentModalSlideIndex = 0;
        let modalSlides = [];
        let modalSlideInterval;
        
        function openServiceModal(serviceKey) {
            const data = servicesData[serviceKey];
            if(!data) return;
            
            document.getElementById("modalMedia").style.display = "none";
            document.getElementById("modalCategory").innerText = "Service";
            document.getElementById("modalTitle").innerText = data.title;
            document.getElementById("modalBody").innerText = data.content;
            modal.style.display = "flex";
            
            if(modalSlideInterval) clearInterval(modalSlideInterval);
        }
        
        function openProjectModal(projectId) {
            const project = projectsData.find(p => p.id === projectId);
            if(!project || project.images.length === 0) return;
            
            document.getElementById("modalCategory").innerText = project.category;
            document.getElementById("modalTitle").innerText = project.title;
            document.getElementById("modalBody").innerText = project.desc;
            
            const modalMedia = document.getElementById("modalMedia");
            modalMedia.style.display = "block";
            modalMedia.innerHTML = "";
            
            // Create slides
            modalSlides = [];
            currentModalSlideIndex = 0;
            
            project.images.forEach((imgSrc, index) => {
                const slide = document.createElement("div");
                slide.className = "modal-slide";
                if (index === 0) slide.classList.add("active");
                slide.innerHTML = `<img src="${imgSrc}" alt="${project.title} - Image ${index + 1}">`;
                modalMedia.appendChild(slide);
                modalSlides.push(slide);
            });
            
            // Create navigation buttons
            const prevBtn = document.createElement("button");
            prevBtn.className = "modal-carousel-nav modal-carousel-prev";
            prevBtn.innerHTML = '<i class="fas fa-chevron-left"></i>';
            prevBtn.onclick = () => changeModalSlide(-1);
            modalMedia.appendChild(prevBtn);
            
            const nextBtn = document.createElement("button");
            nextBtn.className = "modal-carousel-nav modal-carousel-next";
            nextBtn.innerHTML = '<i class="fas fa-chevron-right"></i>';
            nextBtn.onclick = () => changeModalSlide(1);
            modalMedia.appendChild(nextBtn);
            
            // Create dots
            const dotsContainer = document.createElement("div");
            dotsContainer.className = "modal-carousel-controls";
            
            project.images.forEach((_, index) => {
                const dot = document.createElement("div");
                dot.className = "modal-carousel-dot";
                if (index === 0) dot.classList.add("active");
                dot.onclick = () => goToModalSlide(index);
                dotsContainer.appendChild(dot);
            });
            
            modalMedia.appendChild(dotsContainer);
            modal.style.display = "flex";
            
            // Start slideshow
            if(modalSlideInterval) clearInterval(modalSlideInterval);
            modalSlideInterval = setInterval(() => changeModalSlide(1), 4000);
        }
        
        function changeModalSlide(direction) {
            modalSlides[currentModalSlideIndex].classList.remove("active");
            currentModalSlideIndex = (currentModalSlideIndex + direction + modalSlides.length) % modalSlides.length;
            modalSlides[currentModalSlideIndex].classList.add("active");
            updateModalDots();
            resetModalSlideInterval();
        }
        
        function goToModalSlide(index) {
            modalSlides[currentModalSlideIndex].classList.remove("active");
            currentModalSlideIndex = index;
            modalSlides[currentModalSlideIndex].classList.add("active");
            updateModalDots();
            resetModalSlideInterval();
        }
        
        function updateModalDots() {
            const dots = document.querySelectorAll('.modal-carousel-dot');
            dots.forEach((dot, index) => {
                dot.classList.toggle('active', index === currentModalSlideIndex);
            });
        }
        
        function resetModalSlideInterval() {
            if(modalSlideInterval) clearInterval(modalSlideInterval);
            modalSlideInterval = setInterval(() => changeModalSlide(1), 4000);
        }
        
        function closeModal() {
            modal.style.display = "none";
            if(modalSlideInterval) clearInterval(modalSlideInterval);
        }
        
        // Close modal when clicking outside
        window.onclick = function(event) {
            if (event.target == modal) closeModal();
            if (event.target == installModal) closeInstallModal();
        }
        
        // --- CONTACT FORM ---
        function setupContactForm() {
            const contactForm = document.getElementById('contactForm');
            if (!contactForm) return;
            
            contactForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Get form data
                const formData = {
                    user_name: this.user_name.value,
                    user_email: this.user_email.value,
                    user_phone: this.user_phone.value,
                    service: this.service.options[this.service.selectedIndex].text,
                    message: this.message.value,
                    date: new Date().toLocaleString('fr-FR'),
                    type: 'demande_de_contact'
                };
                
                // Send with EmailJS
                emailjs.send('service_7bwv2ug', 'template_fstaiez', formData)
                    .then(function(response) {
                        alert("‚úÖ Merci ! Votre message a √©t√© envoy√© avec succ√®s. Nous vous r√©pondrons en moins de 2h.");
                        contactForm.reset();
                    }, function(error) {
                        console.error('EmailJS Error:', error);
                        alert('‚ùå Une erreur est survenue. Veuillez r√©essayer ou utiliser le t√©l√©phone au +237 6 83 17 88 84.');
                    });
            });
        }
        
        // --- REDIRECT FUNCTIONS ---
        function redirectToContact(serviceKey) {
            const data = servicesData[serviceKey];
            if(!data) return;
            
            const select = document.getElementById('serviceSelect');
            const messageArea = document.querySelector('[name="message"]');
            
            select.value = serviceKey;
            messageArea.value = data.default_email_msg;
            
            // Scroll to contact section
            window.location.hash = '#contact';
            
            // Highlight fields
            select.style.border = '2px solid var(--secondary)';
            messageArea.style.border = '2px solid var(--secondary)';
            setTimeout(() => { 
                select.style.border = '1px solid #e2e8f0'; 
                messageArea.style.border = '1px solid #e2e8f0'; 
            }, 3000);
            
            // Focus on the form
            select.focus();
        }
        
        function redirectToWhatsApp(serviceKey) {
            const data = servicesData[serviceKey];
            if(!data) return;
            
            const encodedMessage = encodeURIComponent(data.default_whatsapp_msg);
            const whatsappLink = `https://wa.me/message/R5CLNKONGTG2O1?text=${encodedMessage}`;
            window.open(whatsappLink, '_blank', 'noopener,noreferrer');
        }
        
        // --- INSTALLATION FORM ---
        let currentInstallStep = 0;
        
        function openInstallModal() {
            const installModal = document.getElementById("installModal");
            installModal.style.display = "flex";
            currentInstallStep = 0;
            updateInstallModalDisplay();
        }
        
        function closeInstallModal() {
            const installModal = document.getElementById("installModal");
            installModal.style.display = "none";
        }
        
        function nextInstallStep() {
            if (validateCurrentStep()) {
                currentInstallStep++;
                updateInstallModalDisplay();
            }
        }
        
        function prevInstallStep() {
            currentInstallStep--;
            updateInstallModalDisplay();
        }
        
        function updateInstallModalDisplay() {
            // Hide all steps
            document.querySelectorAll('.install-form-step').forEach(step => {
                step.classList.remove('active');
            });
            
            // Show current step
            document.getElementById(`step${currentInstallStep}`).classList.add('active');
            
            // Update step indicators
            document.querySelectorAll('.install-step').forEach((step, index) => {
                step.classList.remove('active', 'completed');
                if (index < currentInstallStep) {
                    step.classList.add('completed');
                } else if (index === currentInstallStep) {
                    step.classList.add('active');
                }
            });
            
            // Update buttons
            document.getElementById('prevBtn').style.display = currentInstallStep > 0 ? 'block' : 'none';
            document.getElementById('nextBtn').style.display = currentInstallStep < 3 ? 'block' : 'none';
            document.getElementById('submitBtn').style.display = currentInstallStep === 3 ? 'block' : 'none';
            
            // Show/hide specific details based on installation type
            const installationType = document.getElementById('installationType').value;
            const videoDetails = document.getElementById('videoDetails');
            const otherDetails = document.getElementById('otherDetails');
            
            if (installationType === 'video') {
                videoDetails.style.display = 'block';
                otherDetails.style.display = 'none';
            } else if (installationType && installationType !== 'video') {
                videoDetails.style.display = 'none';
                otherDetails.style.display = 'block';
            } else {
                videoDetails.style.display = 'none';
                otherDetails.style.display = 'none';
            }
        }
        
        function validateCurrentStep() {
            switch(currentInstallStep) {
                case 0:
                    const interventionType = document.getElementById('interventionType').value;
                    if (!interventionType) {
                        alert("Veuillez s√©lectionner un type d'intervention.");
                        return false;
                    }
                    return true;
                    
                case 1:
                    const type = document.getElementById('installationType').value;
                    const city = document.getElementById('userCity').value;
                    
                    if (!type) {
                        alert("Veuillez s√©lectionner un type d'installation.");
                        return false;
                    }
                    if (!city) {
                        alert("Veuillez indiquer votre ville.");
                        return false;
                    }
                    return true;
                    
                case 2:
                    const details = document.getElementById('installationDetails').value;
                    if (!details) {
                        alert("Veuillez d√©crire votre besoin.");
                        return false;
                    }
                    
                    // Additional validation for video installations
                    const installationType = document.getElementById('installationType').value;
                    if (installationType === 'video') {
                        const cameraType = document.getElementById('cameraType').value;
                        const cameraCount = document.getElementById('cameraCount').value;
                        const recordingNeed = document.getElementById('recordingNeed').value;
                        
                        if (!cameraType || !cameraCount || !recordingNeed) {
                            alert("Veuillez remplir tous les champs obligatoires pour la vid√©osurveillance.");
                            return false;
                        }
                    }
                    return true;
                    
                case 3:
                    const name = document.getElementById('userName').value;
                    const email = document.getElementById('userEmail').value;
                    const phone = document.getElementById('userPhone').value;
                    
                    if (!name || !email || !phone) {
                        alert("Veuillez remplir tous les champs obligatoires de contact.");
                        return false;
                    }
                    
                    // Basic email validation
                    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                    if (!emailRegex.test(email)) {
                        alert("Veuillez entrer une adresse email valide.");
                        return false;
                    }
                    
                    // Basic phone validation
                    const phoneRegex = /^[+\d\s\-\(\)]{10,}$/;
                    if (!phoneRegex.test(phone)) {
                        alert("Veuillez entrer un num√©ro de t√©l√©phone valide.");
                        return false;
                    }
                    return true;
                    
                default:
                    return true;
            }
        }
        
        function setupInstallationForm() {
            const form = document.getElementById('installRequestForm');
            if (!form) return;
            
            // Handle installation type change
            document.getElementById('installationType').addEventListener('change', function() {
                updateInstallModalDisplay();
            });
            
            // Handle form submission
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                if (!validateCurrentStep()) {
                    return;
                }
                
                // Collect form data
                const formData = {
                    intervention_type: document.getElementById('interventionType').value ? document.getElementById('interventionType').options[document.getElementById('interventionType').selectedIndex].text : '',
                    installation_type: document.getElementById('installationType').value ? document.getElementById('installationType').options[document.getElementById('installationType').selectedIndex].text : '',
                    user_city: document.getElementById('userCity').value,
                    user_quarter: document.getElementById('userQuarter').value,
                    installation_details: document.getElementById('installationDetails').value,
                    camera_type: document.getElementById('cameraType').value ? document.getElementById('cameraType').options[document.getElementById('cameraType').selectedIndex].text : '',
                    camera_count: document.getElementById('cameraCount').value,
                    recording_need: document.getElementById('recordingNeed').value ? document.getElementById('recordingNeed').options[document.getElementById('recordingNeed').selectedIndex].text : '',
                    other_services: document.getElementById('otherServices').value,
                    budget_range: document.getElementById('budgetRange').value ? document.getElementById('budgetRange').options[document.getElementById('budgetRange').selectedIndex].text : '',
                    user_name: document.getElementById('userName').value,
                    user_email: document.getElementById('userEmail').value,
                    user_phone: document.getElementById('userPhone').value,
                    preferred_contact: document.getElementById('preferredContact').value ? document.getElementById('preferredContact').options[document.getElementById('preferredContact').selectedIndex].text : '',
                    additional_info: document.getElementById('additionalInfo').value,
                    submission_date: new Date().toLocaleString('fr-FR'),
                    type: 'demande_d_intervention'
                };
                
                // Send with EmailJS
                emailjs.send('service_7bwv2ug', 'template_d6jhwhg', formData)
                    .then(function(response) {
                        alert("‚úÖ Merci ! Votre demande d'intervention a √©t√© envoy√©e avec succ√®s. Nous vous contacterons dans les plus brefs d√©lais.");
                        form.reset();
                        closeInstallModal();
                        currentInstallStep = 0;
                        updateInstallModalDisplay();
                    }, function(error) {
                        console.error('EmailJS Error:', error);
                        alert("‚ùå Une erreur est survenue lors de l'envoi. Veuillez nous contacter directement au +237 6 83 17 88 84.");
                    });
            });
        }
        
        